/*
  
  ISP - Musical instrument teaching tool
  Written by Shane Chen and Derek Ma
  Teacher: Mr. Wong
  2020-11-16

  Description: 
  This program functions as a learning and testing tool for musical instruments. It has a learning program, 
  which will guide the user through the different instrument’s names and instrument families,
  as well as what the instrument looks like. The test program is a quiz on every instrument mentioned in
  the learning program. It will cycle randomly through test questions, and takes answers from the user.
  At the end of the test program, the student will be able to see the amount of questions they got right in a
  percentage score. The user will be able to retry the test, with their percentage score resetting each time.

*/

//import sound
import processing.sound.*;

//countdown
int countdown;

//load PImages
PImage img1, img2, img3, img4, learnPhoto, quizPhoto;

//load PFonts
PFont f1, f2, f3;

//load sounds
//music and sound effect variables
SoundFile clickSfx;
SoundFile menuMusic;
SoundFile splashScreenSfx;

//MAIN SLIDE SWITCHER
int stateId = 0; 

//randomized list for quiz
IntList questionList;

//all for animated splash screen
float angle;
float turnAccel=0;
int noteSize=2;
int circleSize=1500;
float wait=0;

//smooth edge rectangles
final int UI_CORNER = 5;
final int MAX_SCORE = 30;

//shades for mousehover
int defShade1 = 200;
int defShade2 = 225;
int defShade3 = 250;
int defShade4 = 250;

//for menu slding up transition
int menuY = 520;
//reached the point of stopping ui movement
boolean max = false;
//counter to delay
int counter1 = 100;

//title text transparency
int titleT = 0;

//main screens transition
int transparency1 = 0;
boolean reachedTp = false;

//learn menu transition
int transparency2 = 0;
boolean reachedTp2 = false;
boolean changedBg = false;

//learn state id to switch slides
int learnStateId = 0;

//text for learn
String learnText;

//reset quiz questions boolean
boolean orderRandomized = false;

//quiz menu transition
int transparency3 = 0;

boolean reachedTp3 = false;
boolean changedBg1 = false;

//quiz state id to switch slides, is -1 so it doesnt interfere with the actual slides
int quizStateId = -1;

//store inputs
String pianoName = "";
String pianoClass= "";
String trumpetName= "";
String trumpetClass= "";
String violinName= "";
String violinClass= "";
String clarinetName = "";
String clarinetClass= "";
String tromboneName= "";
String tromboneClass= "";
String dbName= "";
String dbClass= "";
String tubaName = "";
String tubaClass= "";
String frenchHornName= "";
String frenchHornClass= "";
String fluteName= "";
String fluteClass= "";
String saxophoneName = "";
String saxophoneClass= "";
String timpaniName= "";
String timpaniClass= "";
String marimbaName= "";
String marimbaClass= "";
String harpName = "";
String harpClass= "";
String cymbalsName= "";
String cymbalsClass= "";
String guitarName= "";
String guitarClass= "";

//boolean for quiz complete
boolean completedQuiz = false;

//boolean for quiz slide 1
boolean onLastSlide = false;

//quiz
boolean nameClicked = false;
boolean classClicked = false;

//change quiz id
int currentKey = 0;

//final score
int finalScore;


//setup (loads images, sounds, and fonts, as well as the size of canvas)

void setup() {
  size(900, 600);
  noStroke();
  fill(255);
  
  imageMode(CENTER);
  
  img1 = loadImage("eighthNote-removebg-preview.png");
  image(img1, 0, 0);
  
  img2 = loadImage("bg1.png");
  img2.resize(900, 600);
  
  img3 = loadImage("bg2.png");
  img3.resize(900, 600);
  
  img4 = loadImage("bg3.png");
  img4.resize(900, 600);

 f1 = loadFont("Algerian-48.vlw"); 
 f2 = loadFont("Arial-ItalicMT-48.vlw");
 f3 = loadFont("Calibri-24.vlw");
 
  clickSfx=new SoundFile(this, "mouseClick.wav");
  menuMusic=new SoundFile(this, "loveOfAllShortened.wav");
  splashScreenSfx=new SoundFile(this, "splashScreenPing.wav");
 
}



//splash screen method --------------------------------------------------------------------------------
void splashScreen() {
  splashScreenSfx.amp(0.1);
  splashScreenSfx.play();
  fill(255);
    translate(width/2, height/2);
    if (wait<200) {
      ellipse(0, 0, 1500, 1500);
      wait+=5;
    } else if (circleSize>0) {  
      splashScreenSfx.stop();
      fill(255);
      ellipse(0, 0, circleSize, circleSize);
      circleSize-=6;
    }

    if (turnAccel<=20) {
      turnAccel+=0.25;
      angle = angle - radians(turnAccel/10);
      rotate(angle);
      image(img1, 0, 0);
    } else if (wait<=200&&noteSize<=225&&noteSize>0) {
      noteSize+=1;
      angle = angle - radians(5);
      rotate(angle);
      if (noteSize < 225.5) {
      img1.resize(227-noteSize, 227-noteSize);
      image(img1, 0, 0);
      } else {
       image(img1, 0, 0);
       stateId = 1;
      }
    }
}

// intro method ------------------------------------------------------------------------------------------------------------

void intro() {
  
 stroke(25);
 strokeWeight(3);
 fill(0);
 textFont(f1);
 textAlign(LEFT);
 text("Intro to Instruments", 185, 150);
 textAlign(CENTER, CENTER);
 textSize(14);
 textFont(f2, 22);
 text("Learn all about instruments and their families by clicking on the learn button,\n which will guide you through a slideshow of some common musical instruments!\n " + 
 "Quiz yourself on it after with an interactive input system and expand your knowlege!\n Your results will be shown after the quiz. Have fun!", 450, 250);
 textAlign(LEFT);
 fill(200);
  
}

// learn method ------------------------------------------------------------------------------------------------------

void learn() {
 if (learnStateId==1) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("piano.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The piano is a stationary instrument from the string instrument family.\n It consists of 88 black and white keys, each of which will strike a \ndifferent string that will produce a different pitch of sound.";
  }
  if (learnStateId==2) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("trumpet.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The trumpet is a member of the brass instrument family. It has three buttons \nconnected to valves that will adjust airflow. The end of the trumpet \nis a bell, and there is a mouthpiece opening.";
  }
  if (learnStateId==3) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("violin.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    
    learnText="The violin is the highest note range instrument in the string instrument family.\n It plays using a bow being brushed across one of four strings \nalong with the player shortening the string on the fingerboard by holding it down with their finger.";
  }
  if (learnStateId==4) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("clarinet.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    
    learnText="The clarinet is known as a single reed instrument. The player would use the mouthpiece,\n or reed, to push air through the instrument, creating a pitch \nof sound. This pitch could be altered by pushing the keys that line the outside of the instrument.";
  }
  if (learnStateId==5) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("trombone.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The trombone is of the brass instrument family. It produces a pitch using a place for\n the player to blow, combined with a section of tubing\n that lets the player adjust to change the pitch.";
  }
  if (learnStateId==6) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("DB.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The double bass is part of the string instrument family. It functions similarly to a\n violin, but is much bigger. Instead of resting a double bass \non one’s shoulder to play, the double bass needs to stand upright, which the player could then\n reach the finger board and to bow at the same time.";
  }
  if (learnStateId==7) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("tuba.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The tuba is part of the brass instrument family. It has similar controls to a trumpet,\n with three keys to press, but it is much larger, stands vertically\n rather than held horizontally, and produces a much deeper sound range.";
  }
  if (learnStateId==8) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("frenchHorn.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The French Horn is another member of the brass instrument family. It’s tubing track is\n circular rather straight, and is also played with three keys.\n The french horn also has a large, flared bell at the end of it, which some players like to hold to\n improve their grip on the instrument.";
  }
  if (learnStateId==9) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("flute.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The flute is part of the woodwind instrument family, and has one of the highest note\n ranges in an orchestra. The flute is played with an opening on\n the top of the straight pipe to blow in, then adjusted for pitch\n and tone with buttons that line the outside of the flute.";
  }
  if (learnStateId==10) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("saxophone.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The saxophone is a woodwind instrument, which requires a reed to blow into.\n The saxophone also has a series of buttons that open and close valves, which line it’s body.";
  }
 if (learnStateId==11) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("timpani.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The timpani is part of the percussion instrument family. It usually is a\n brass semisphere, with a membrane stretched across the top.\n This membrane is then hit with a mallet to produce a sound.";
  }
  if (learnStateId==12) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("marimba.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText=":A marimba is a part of the percussion instrument family,\n which consists of several different-sized wooden/metal blocks,\n which are struck with a rubber mallet to produce sound.";
  }
  if (learnStateId==13) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("harp.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The harp is in the string instrument family. It seems \nlike a standing triangular instrument, with strings that are suspended\n across the edges of the harp. These strings are plucked to produce sound.";
  }
  if (learnStateId==14) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("cymbals.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="Cymbals are part of the percussion instrument family.\n They are two circular plates that are struck together to produce a loud clanging sound.";
  }
  if (learnStateId==15) {
    if (reachedTp2 == true) {
      learnPhoto=loadImage("guitar.png");
      learnPhoto.resize(150, 125);
      image(learnPhoto, 450, 205);
      stroke(5);
      rectMode(CENTER);
      noFill();
      rect(450, 205, 150, 125); 
    }
    learnText="The guitar is a six string instrument in the string instrument family.\n The strings are strummed by the player, which make a sound.\n The six strings, when played together, could produce a set of notes, or a chord.";
  }
  
  textSize(18);
  if (reachedTp2 == true) {
    fill(255);
    text(learnText, 450, 325);
  }
  rectMode(CORNER); 
}

// quiz method --------------------------------------------------------------------------------------------------------

void quiz() {
 
 //these represent the order of the instruments listed for the quiz, which will be randomized 
 //ex 0 would be the piano, 1 the trumpet, and so on.
  if (orderRandomized == false) {  
     questionList = new IntList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14);   
     questionList.shuffle(); 
     orderRandomized = true;   
   }
   
   quizStateId = questionList.get(0);
   reachedTp3 = false;
   transparency3 = 0;
}

//draw method (driver)

void draw() {   
  frameRate(60);
  //-----------------------------------------------------------------------------------------------------------
  //code block for splash screen
  if (stateId == 0) {
    background(img2);
    splashScreen();
  }
  
  //code block for title -----------------------------------------------------------------------------------------------------------

  if (stateId == 1) {
    while (counter1 > 0) {
      menuMusic.amp(0.5);
      menuMusic.loop();
      background(img2);
      counter1--;
    }
    background(img2);
    textFont(f1, 90);

     if (titleT < 255) {
       titleT+= 5;
     }
     
     fill(0, titleT);
    
    text("Introduction to\n   Instruments",75,150,900,600);
    textSize(24);
    if (titleT > 250) {
      fill(100);
      text("Press any button to continue...",250,350,400,300);
    }
    if(keyPressed==true){
      stateId = 3;
      menuY = 520;
    }
    
  }
  
  //-----------------------------------------------------------------------------------------------------------
  
  //code block for intro
  if (stateId == 2) {
    background(img2);
    
    fill(255);
    
    noStroke();
  
    if (transparency1 < 250 && reachedTp == false) {
      fill(0, transparency1);
      rect(0, 0, 900, 600);
      transparency1 += 15;
     
    } else {
      reachedTp = true;
      fill(0, transparency1);
      rect(0, 0, 900, 600);
      if (transparency1 > 10) {
        transparency1 -= 15;
      } 
        
       intro();
      
       int x = 350;
       int y = 420;
       int w = 200;
       int h = 35;
      
       noFill();
       rect(x, y, w, h, UI_CORNER);
     
       fill(0);
       textFont(f3);
       text("Got it!", 420, 446);
      
       if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
        stateId = 3;
        reachedTp = false;
        transparency1 = 0;
        menuY = 520;
       }     
      
    }
  
  }
  
  
  
  
  //-------------------------------------------------------------------------------------------------------------------
  //code block for main menu (may edit later)
  if (stateId == 3) {
    textAlign(LEFT);
    background(img2);
    
    fill(255);
    
    
    
    stroke(25);
    strokeWeight(3);
  
    if (menuY > 150) {
      fill(0);
      textFont(f1);
      text("Intro to Instruments", 185, menuY - 10);
      
      fill(200);   
      rect(200, menuY + 60, 500, 35, UI_CORNER);
      fill(225);
      rect(200, menuY + 130, 500, 35, UI_CORNER);
      fill(250);
      rect(200, menuY + 200, 230, 35, UI_CORNER);
      rect(470, menuY + 200 , 230, 35, UI_CORNER);
     
      fill(0);
      textFont(f2);
      textSize(24);
      text("Learn Instruments", 365, menuY + 86);
      text("Take Quiz", 400, menuY + 156);
      text("Credits", 280, menuY + 226);
      text("Quit", 570, menuY + 226);
      menuY -= 20;
    } else {
      fill(0);
      textFont(f1);
      text("Intro to Instruments", 185, menuY - 10);
      fill(defShade1);
      
      int x = 200;
      int y = 210;
      int w = 500;
      int h = 35;
      
      rect(x, y, w, h, UI_CORNER);
      fill(defShade2);
      rect(x, y + 70, w, h, UI_CORNER);
      fill(defShade3);
      rect(x, y + 140, w/2 - 20, h, UI_CORNER);
      fill(defShade4);
      rect(x*2 + 70, y + 140, w/2 - 20, h, UI_CORNER);
      noFill();
      noStroke();
      rect(825, 525, 50, 50);
      stroke(2);
      ellipse(845, 545, 50, 50);
      fill(0);
      text("?", 835, 560);
     
      
      textFont(f3);
      text("Learn Instruments", 365, 236);
      text("Take Quiz", 400, 306);
      text("Credits", 280, 376);
      text("Quit", 565, 376);
     
      if (mouseX > 825 && mouseX <825+50 && mouseY>525 && mouseY <525 +50) {
        
        if (mousePressed) {
         stateId = 2;
        }
      }
      
      
      if(mouseX > x && mouseX <x+w && mouseY>y && mouseY <y+h){
        if (defShade1 > 199) {
          defShade1 -= 20;
        }        
        if (mousePressed) {
          stateId = 4; //learn
          changedBg = false;
          learnStateId = 0;
          defShade1 = 200;
          defShade2 = 225;
          defShade3 = 250;
          defShade4 = 250;
        }
      } else if(mouseX > x && mouseX <x+w && mouseY>y + 70 && mouseY <y + 70 +h){
        if (defShade2 > 224) {
          defShade2 -= 20;
        }  
        if (mousePressed) {
          stateId = 5; //quiz
          reachedTp3 = false;
          changedBg1 = false;
          defShade1 = 200;
          defShade2 = 225;
          defShade3 = 250;
          defShade4 = 250;
        }
      } else if (mouseX > x && mouseX <x+w/2 - 20 && mouseY>y + 140 && mouseY <y + 140 +h){
        if (defShade3 > 249) {
          defShade3 -= 20;
        }   
        if (mousePressed) {
          stateId = 6; //credits
          defShade1 = 200;
          defShade2 = 225;
          defShade3 = 250;
          defShade4 = 250;
        }
      } else if (mouseX > x*2 + 70 && mouseX <x*2 + 70 + w/2 - 20 && mouseY>y + 140 && mouseY <y + 140 +h){ 
        if (defShade4 > 249) {
          defShade4 -= 20;
        }   
        if (mousePressed) {
          stateId = 7; //quit
          reachedTp = false;
          transparency1 = 0;
        }
      } else {
        defShade1 = 200;
        defShade2 = 225;
        defShade3 = 250;
        defShade4 = 250;
      }
      
    }
    
    
  }
  
  //-------------------------------------------------------------------------------------------------------------------
  //code block for learn
  if (stateId == 4) {
    
    if (reachedTp == false && changedBg == false) {
      background(img2);
    } else {
      changedBg = true;
      background(img3);
    }
    noStroke();
    if (transparency1 < 250 && reachedTp == false) {
      fill(0, transparency1);
      rect(0, 0, 900, 600);
      transparency1 += 15;
    } else {
      reachedTp = true;
      
      fill(0, 0, 0, transparency1);
      rect(0, 0, 900, 600);
      if (transparency1 > 10) {
        transparency1 -= 15;
      }
      
      //page numbers
      fill(255);
      textSize(14);
      text(learnStateId + 1 + "/16", 875, 25);
      
      //first slide in learn
       if (learnStateId == 0) {
        fill(255);
        textFont(f1, 42);
        textAlign(CENTER, CENTER);
        text("Intro to Instruments - Learn", 450, 110);
        
        textSize(14);
        textFont(f2, 18);
        text("Welcome to the information slideshow of musical instruments!\n Please take your time to read and observe these musical\n instruments for future " + 
        "reference. \n After this, you can quiz yourself using the quiz button in the main menu!", 450, 300);
        
        int x = 25;
        int y = 25;
        int w = 135;
        int h = 35;
      
        noFill();
        stroke(255);
        strokeWeight(3);
        
        rect(x, y, w, h, UI_CORNER);
        rect(x + 710, y + 510, w, h, UI_CORNER);
     
        //fill(0);
        textFont(f3);
        text("Main Menu", 93, 45);
        text("Next", 803, 552);
      
        if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
           stateId = 3;
           reachedTp = false;
           transparency1 = 0;
           menuY = 520;
         }
       
         if (mousePressed && mouseX > x + 710 && mouseX <x+ 710 + w && mouseY>y + 510 && mouseY <y + 510 + h) {
           learnStateId += 1;
           reachedTp2 = false;
           transparency2 = 0;
         }
       
         
       } else if (learnStateId == 15) { //last learn slide --------------------
       
         if (transparency2 < 250 && reachedTp2 == false) {
          fill(0, transparency2);
          rect(0, 0, 900, 600);
          transparency2 += 15;
        } else {
          reachedTp2 = true;
      
          fill(0, 0, 0, transparency2);
          rect(0, 0, 900, 600);
          if (transparency2 > 10) {
            transparency2 -= 15;
          }
          
          rectMode(CORNER);
          if (reachedTp2 == true) {
            learnPhoto=loadImage("guitar.png");
            learnPhoto.resize(150, 125);
            image(learnPhoto, 450, 205);
            stroke(5);
            rectMode(CENTER);
            noFill();
            rect(450, 205, 150, 125); 
          }
          fill(255);
          textSize(18);
          text("The guitar is a six string instrument in the string instrument family.\n The strings are strummed by the player, which make a sound.\n The six strings, when played together, could produce a set of notes, or a chord.", 450, 325);
          rectMode(CORNER);
          textFont(f1, 32);
          text("Intro to Instruments - Learn", 450, 100);
          
          int x = 25;
          int y = 25;
          int w = 135;
          int h = 35;
      
          noFill();
          stroke(255);
          strokeWeight(3);
          rect(x, y, w, h, UI_CORNER);
          rect(x, y + 510, w, h, UI_CORNER);
     
          //fill(0);
          textFont(f3);
          
          text("Main Menu", 93, 45);
          text("Back", 93, 552);
      
          if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
             stateId = 3;
             reachedTp = false;
             transparency1 = 0;
             menuY = 520;
           }
           
           if (mousePressed && mouseX > x && mouseX <x + w && mouseY>y + 510 && mouseY <y + 510 + h) {
             learnStateId -= 1;
             if (learnStateId == 0) {
               reachedTp = false;
               transparency1 = 0;
             }
             reachedTp2 = false;
             transparency2 = 0;
           }
         }

       } else { //slides 2 - 14 --------------------------
         
         if (transparency2 < 250 && reachedTp2 == false) {
          fill(0, transparency2);
          rect(0, 0, 900, 600);
          transparency2 += 15;
        } else {
          reachedTp2 = true;
      
          fill(0, 0, 0, transparency2);
          rect(0, 0, 900, 600);
          if (transparency2 > 10) {
            transparency2 -= 15;
          }
          
          fill(255);
          textFont(f1, 32);
          text("Intro to Instruments - Learn", 450, 100);
          
          int x = 25;
          int y = 25;
          int w = 135;
          int h = 35;
      
          noFill();
          stroke(255);
          strokeWeight(3);
          rect(x, y, w, h, UI_CORNER);
          rect(x + 710, y + 510, w, h, UI_CORNER);
          rect(x, y + 510, w, h, UI_CORNER);
     
          //fill(0);
          textFont(f3);
          text("Main Menu", 93, 45);
          text("Back", 93, 552);
          text("Next", 803, 552);
      
          if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
             stateId = 3;
             reachedTp = false;
             transparency1 = 0;
             menuY = 520;
           }
           
           if (mousePressed && mouseX > x && mouseX <x + w && mouseY>y + 510 && mouseY <y + 510 + h) {
             learnStateId -= 1;
             if (learnStateId == 0) {
               reachedTp = false;
               transparency1 = 0;
             }
             reachedTp2 = false;
             transparency2 = 0;
           }
           
           if (mousePressed && mouseX > x + 710 && mouseX <x+ 710 + w && mouseY>y + 510 && mouseY <y + 510 + h) {
             learnStateId += 1;
             reachedTp2 = false;
             transparency2 = 0;
           }
          
        } //end of nested conditional
        
        //actual content
        learn();
      }
    } //end of main else conditional
    
  } //end of learn code block


  //-------------------------------------------------------------------------------------------------------------------
  //code block for quiz
  if (stateId == 5) {
    
    int x = 25;
    int y = 25;
    int w = 135;
    int h = 35;
    
     if (reachedTp3 == false && changedBg1 == false) {
        background(img2);
        
      } else {
        
        background(img4);
        changedBg1 = true;
      }
    noStroke();
    if (transparency3 < 250 && reachedTp3 == false) {
      fill(0, transparency3);
      rect(0, 0, 900, 600);
      transparency3 += 15;
    } else {
      reachedTp3 = true;  
      
      fill(0, 0, 0, transparency3);
      rect(0, 0, 900, 600);
      if (transparency3 > 10) {
        transparency3 -= 15;
      }

    if (quizStateId == -1) {
      
      noFill();
      strokeWeight(3);
      stroke(255);
      //begin quiz button
      rect(x + 350, y + 350, w, h, UI_CORNER);
      
     strokeWeight(3);
     fill(255);
     textFont(f2, 22);
     textAlign(CENTER, CENTER);
     text("Welcome to the quiz.\n By now, you should be able to identify instruments and their family that you learned.\n " + 
     "Press the button below to begin the quiz. \n You will be able to restart at any time. \nYou may leave answers blank if you do not know the answer. "
      + "\nYou may not change your answers, so be careful.", 450, 250);
     textFont(f3);
     text("Begin", 445, 391);
     textAlign(LEFT);
      
      if (mousePressed && mouseX > x + 350 && mouseX <x + 350 +w && mouseY>y + 350 && mouseY <y + 350 + h) {
        quiz();
        finalScore = 0;
      }
      
      fill(255);
      textFont(f1, 32);
      text("Intro to Instruments - Quiz", 225, 125);
      
      
      noFill();
      //main menu button
      stroke(255);
      rect(x, y, w, h, UI_CORNER);
     
      fill(255);
      textFont(f3);

      text("Main Menu", 34, 53);
      
      if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
       stateId = 3;
       reachedTp = false;
       transparency1 = 0;
       menuY = 520;
      }

    } 
    
    if (quizStateId > -1) {
      background(img4);
      //println(quizStateId);
       
      rectMode(CORNER);
      fill(255);
      textAlign(CENTER, CENTER);
      textFont(f1, 28);
      text("Intro to Instruments - Quiz", 450, 80);
      textFont(f2, 20);
      text("Examine the above instrument.", 450, 275);
      text("Click below to enter the instrument\'s name:", 450, 300);
      text("Click below to enter the instrument\'s family: ", 450, 400);
  
      noFill();
      stroke(255);
      strokeWeight(3);
      if (onLastSlide == false) {
        rect(x + 710, y + 510, w, h, UI_CORNER);
        textFont(f3);
        text("Next", 804, 552);
      } else {
        rect(x + 710, y + 510, w, h, UI_CORNER);
        textFont(f3);
        text("Finish", 804, 552);
      }
      
       if (mousePressed && mouseX > x + 710 && mouseX <x+ 710 + w && mouseY>y + 510 && mouseY <y + 510 + h && onLastSlide == false) {
         if (currentKey < 14) {
           currentKey += 1;
           quizStateId = questionList.get(currentKey);
           nameClicked = false;
           classClicked = false;
         }
         if (currentKey == 14) {
          onLastSlide = true; 
         }
         reachedTp3 = false;
         transparency3 = 0;
         mousePressed = false;
       }
       
      if (mouseX > x + 710 && mouseX <x+ 710 + w && mouseY>y + 510 && mouseY <y + 510 + h && onLastSlide == true) {
        
         //quiz end -----------------------------------------------------------------------------------
         if (mousePressed) {
           //end quiz, display answers, reset quiz and have main menu button
           finalScore = quizResult();
                      
           stateId = 8;
           transparency1 = 0;
           reachedTp =false;
           mousePressed = false;
           
           
         }
       }
       
      noFill();
      stroke(255);
      rect(x, y, w, h, UI_CORNER);
      fill(255);
      textFont(f3);

      text("Restart", 90, 44);
      
      if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
        resetQuiz();
        quiz();
        currentKey = 0;
        quizStateId = -1;
        onLastSlide = false;         
        nameClicked = false;
        orderRandomized = false;
        classClicked = false;
        finalScore = 0;
        mousePressed = false;
      }
 
    }
    
    
      if (quizStateId == 0) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("piano.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  pianoName = getString(msg);
                  if (pianoName == null) {
                    msg = "Please enter an input. ";
                  }else if (pianoName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (pianoName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  pianoClass = getString(msg);
                  if (pianoClass == null) {
                    msg = "Please enter an input. ";
                  }else if (pianoClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (pianoClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (pianoName != null && pianoClass != null) {
              text(pianoName, 450, 350);
              text(pianoClass, 450, 450);
            }
        }
      }
      
      if (quizStateId == 1) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("trumpet.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  trumpetName = getString(msg);
                  if (trumpetName == null) {
                    msg = "Please enter an input. ";
                  }else if (trumpetName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (trumpetName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  trumpetClass = getString(msg);
                  if (trumpetClass == null) {
                    msg = "Please enter an input. ";
                  }else if (trumpetClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (trumpetClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (trumpetName != null && trumpetClass != null) {
              text(trumpetName, 450, 350);
              text(trumpetClass, 450, 450);
            }
        }
      }
      
      if (quizStateId == 2) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("violin.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  violinName = getString(msg);
                  if (violinName == null) {
                    msg = "Please enter an input. ";
                  }else if (violinName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (violinName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  violinClass = getString(msg);
                  if (violinClass == null) {
                    msg = "Please enter an input. ";
                  }else if (violinClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (violinClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (violinName != null && violinClass != null) {
              text(violinName, 450, 350);
              text(violinClass, 450, 450);
            }
        }
      }
      if (quizStateId == 3) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("clarinet.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  clarinetName = getString(msg);
                  if (clarinetName == null) {
                    msg = "Please enter an input. ";
                  }else if (clarinetName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (clarinetName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  clarinetClass = getString(msg);
                  if (clarinetClass == null) {
                    msg = "Please enter an input. ";
                  }else if (clarinetClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (clarinetClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (clarinetName != null && clarinetClass != null) {
              text(clarinetName, 450, 350);
              text(clarinetClass, 450, 450);
            }
        }
      }
      if (quizStateId == 4) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("trombone.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  tromboneName = getString(msg);
                  if (tromboneName == null) {
                    msg = "Please enter an input. ";
                  }else if (tromboneName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (tromboneName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  tromboneClass = getString(msg);
                  if (tromboneClass == null) {
                    msg = "Please enter an input. ";
                  }else if (tromboneClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (tromboneClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (tromboneName != null && tromboneClass != null) {
              text(tromboneName, 450, 350);
              text(tromboneClass, 450, 450);
            }
        }
      }
      if (quizStateId == 5) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("DB.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  dbName = getString(msg);
                  if (dbName == null) {
                    msg = "Please enter an input. ";
                  }else if (dbName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (dbName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  dbClass = getString(msg);
                  if (dbClass == null) {
                    msg = "Please enter an input. ";
                  }else if (dbClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (dbClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (dbName != null && dbClass != null) {
              text(dbName, 450, 350);
              text(dbClass, 450, 450);
            }
        }
      }
      if (quizStateId == 6) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("tuba.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  tubaName = getString(msg);
                  if (tubaName == null) {
                    msg = "Please enter an input. ";
                  }else if (tubaName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (tubaName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  tubaClass = getString(msg);
                  if (tubaClass == null) {
                    msg = "Please enter an input. ";
                  }else if (tubaClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (tubaClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (tubaName != null && tubaClass != null) {
              text(tubaName, 450, 350);
              text(tubaClass, 450, 450);
            }
        }
      }
      if (quizStateId == 7) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("frenchHorn.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          //get input -------------------------------------------------------------------------------
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
            if (mousePressed && nameClicked == false) {
              String msg = "Enter the name of this instrument: ";
              while (true) {
                frenchHornName = getString(msg);
                if (frenchHornName == null) {
                  msg = "Please enter an input. ";
                }else if (frenchHornName.length() < 2) {
                  msg = "Invalid input. Your answer is too short.";
                } else if (frenchHornName.length() > 15) {
                  msg = "Invalid input. Your answer is too long. ";               
                } else {
                 break; 
                }
              }
              nameClicked = true;
              mousePressed = false;
            }
          }
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
            if (mousePressed && classClicked == false) {
              String msg = "Enter the family of this instrument: ";
              while (true) {
                frenchHornClass = getString(msg);
                if (frenchHornClass == null) {
                  msg = "Please enter an input. ";
                }else if (frenchHornClass.length() < 2) {
                  msg = "Invalid input. Your answer is too short.";
                } else if (frenchHornClass.length() > 15) {
                  msg = "Invalid input. Your answer is too long. ";               
                } else {
                 break; 
                }
              }
              classClicked = true;
              mousePressed = false;
            }
          }

          fill(0);
          if (frenchHornName != null && frenchHornClass != null) {
            text(frenchHornName, 450, 350);
            text(frenchHornClass, 450, 450);
          }
          
          //end of get input -------------------------------------------------------------------------------   
        }
      }
      if (quizStateId == 8) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("flute.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
            
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  fluteName = getString(msg);
                  if (fluteName == null) {
                    msg = "Please enter an input. ";
                  }else if (fluteName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (fluteName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  fluteClass = getString(msg);
                  if (fluteClass == null) {
                    msg = "Please enter an input. ";
                  }else if (fluteClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (fluteClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (fluteName != null && fluteClass != null) {
              text(fluteName, 450, 350);
              text(fluteClass, 450, 450);
            }
          
        }
      }
      
      
      if (quizStateId == 9) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("saxophone.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  saxophoneName = getString(msg);
                  if (saxophoneName == null) {
                    msg = "Please enter an input. ";
                  }else if (saxophoneName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (saxophoneName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  saxophoneClass = getString(msg);
                  if (saxophoneClass == null) {
                    msg = "Please enter an input. ";
                  }else if (saxophoneClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (saxophoneClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (saxophoneName != null && saxophoneClass != null) {
              text(saxophoneName, 450, 350);
              text(saxophoneClass, 450, 450);
            }
        }
      }
      if (quizStateId == 10) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("timpani.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  timpaniName = getString(msg);
                  if (timpaniName == null) {
                    msg = "Please enter an input. ";
                  }else if (timpaniName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (timpaniName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  timpaniClass = getString(msg);
                  if (timpaniClass == null) {
                    msg = "Please enter an input. ";
                  }else if (timpaniClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (timpaniClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (timpaniName != null && timpaniClass != null) {
              text(timpaniName, 450, 350);
              text(timpaniClass, 450, 450);
            }
        }
      }
      if (quizStateId == 11) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("marimba.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  marimbaName = getString(msg);
                  if (marimbaName == null) {
                    msg = "Please enter an input. ";
                  }else if (marimbaName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (marimbaName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  marimbaClass = getString(msg);
                  if (marimbaClass == null) {
                    msg = "Please enter an input. ";
                  }else if (marimbaClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (marimbaClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (marimbaName != null && marimbaClass != null) {
              text(marimbaName, 450, 350);
              text(marimbaClass, 450, 450);
            }
        }
      }
      if (quizStateId == 12) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("harp.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  harpName = getString(msg);
                  if (harpName == null) {
                    msg = "Please enter an input. ";
                  }else if (harpName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (harpName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  harpClass = getString(msg);
                  if (harpClass == null) {
                    msg = "Please enter an input. ";
                  }else if (harpClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (harpClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (harpName != null && harpClass != null) {
              text(harpName, 450, 350);
              text(harpClass, 450, 450);
            }
        }
      }
      if (quizStateId == 13) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("cymbals.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  cymbalsName = getString(msg);
                  if (cymbalsName == null) {
                    msg = "Please enter an input. ";
                  }else if (cymbalsName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (cymbalsName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  cymbalsClass = getString(msg);
                  if (cymbalsClass == null) {
                    msg = "Please enter an input. ";
                  }else if (cymbalsClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (cymbalsClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (cymbalsName != null && cymbalsClass != null) {
              text(cymbalsName, 450, 350);
              text(cymbalsClass, 450, 450);
            }
        }
      }
      if (quizStateId == 14) {
        if (reachedTp3 == true) {
          quizPhoto=loadImage("guitar.png");
          quizPhoto.resize(150, 125);
          image(quizPhoto, 450, 175);
          stroke(5);
          rectMode(CENTER);
          noFill();
          rect(450, 175, 150, 125); 
          
          stroke(255);
          fill(255, 200);
          rectMode(CORNER);
          rect(325, 325, 250, 50);
          rect(325, 425, 250, 50);
          
          if (mouseX > 325 && mouseX <325 + 250 && mouseY>325 && mouseY <325 + 50) {
              if (mousePressed && nameClicked == false) {
                String msg = "Enter the name of this instrument: ";
                while (true) {
                  guitarName = getString(msg);
                  if (guitarName == null) {
                    msg = "Please enter an input. ";
                  }else if (guitarName.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (guitarName.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                nameClicked = true;
                mousePressed = false;
              }
            }
            
            if (mouseX > 325 && mouseX <325 + 250 && mouseY>425 && mouseY <425 + 50) {
              if (mousePressed && classClicked == false) {
                String msg = "Enter the family of this instrument: ";
                while (true) {
                  guitarClass = getString(msg);
                  if (guitarClass == null) {
                    msg = "Please enter an input. ";
                  }else if (guitarClass.length() < 2) {
                    msg = "Invalid input. Your answer is too short.";
                  } else if (guitarClass.length() > 15) {
                    msg = "Invalid input. Your answer is too long. ";               
                  } else {
                   break; 
                  }
                }
                classClicked = true;
                mousePressed = false;
              }
            }
  
            fill(0);
            if (guitarName != null && guitarClass != null) {
              text(guitarName, 450, 350);
              text(guitarClass, 450, 450);
            }
        }
      }
      
    }
  }
  
  
  //-------------------------------------------------------------------------------------------------------------------
  //code block for credits
  if (stateId == 6) {
    
    background(img2);
    noStroke();
    if (transparency1 < 250 && reachedTp == false) {
      fill(0, transparency1);
      rect(0, 0, 900, 600);
      transparency1 += 15;
    } else {
      reachedTp = true;
      
      fill(0, 0, 0, transparency1);
      rect(0, 0, 900, 600);
      if (transparency1 > 10) {
        transparency1 -= 15;
      }
      
      textFont(f2);
      textSize(22);
      fill(0);
      text("Program Writers:\nShane Chen\nDerek Ma\n\nTeacher:\nMr. Wong\n\nImage credits:\nGoogle Images\nPexel Images\n\nSpecial thanks:\nFriends that helped us:)\n\nGrade 9 ISP project 2020",210,180);
      
      
      int x = 25;
      int y = 25;
      int w = 135;
      int h = 35;
      
      noFill();
      stroke(3);
      rect(x, y, w, h, UI_CORNER);
     
      fill(0);
      textFont(f3);

      text("Main Menu", 36, 53);
      
      if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
       stateId = 3;
       reachedTp = false;
       transparency1 = 0;
       menuY = 520;
       }
      
      fill(0);
      textFont(f1, 32);
      text("Intro to Instruments - Credits", 210, 125);

    }
  }
  
  //code block for quit --------------------------------------------------------------------------
  
  if (stateId==7) {
    menuMusic.stop();
    if (reachedTp == false) {
      background(img2);
    } else {
      background(img3);
    }
    noStroke();
    if (transparency1 < 250 && reachedTp == false) {
      fill(0, transparency1);
      rect(0, 0, 900, 600);
      transparency1 += 15;
    } else {
      reachedTp = true;  

      fill(0, 0, 0, transparency1);
      rect(0, 0, 900, 600);
      if (transparency1 > 10) {
        transparency1 -= 15;
      }
    }   
    countdown+=1;
    if (reachedTp==true&&countdown<=200) {
      fill(255);
      textFont(f2);
      textSize(30);
      textAlign(CENTER);
      text("This program is now closing.\n Thank you for using our\n Orchestral Instrument Learning Program! \nThis program will now automatically close.", 450, 300);
    } else if (reachedTp==true&&countdown>=200) {
      exit();
    }
  }
  
  if (stateId == 8) {
    
    int x = 25;
    int y = 25;
    int w = 135;
    int h = 35;
          
    if (reachedTp == false) {
      background(img4);
    } else {
      background(img4);
    }
    noStroke();
    if (transparency1 < 250 && reachedTp == false) {
      fill(0, transparency1);
      rect(0, 0, 900, 600);
      transparency1 += 5;
    } else {
      reachedTp = true;  

      fill(0, 0, 0, transparency1);
      rect(0, 0, 900, 600);
      if (transparency1 > 49) {
        transparency1 -= 5;
      }
      
      fill(255);
      textFont(f1, 32);
      text("Intro to Instruments - Quiz", 450, 80);
      textFont(f3, 24);
      text("Congrats on finishing the quiz! \n\n\nHere are your scores:", 450, 180);
      textFont(f2, 48);
      //PLACEHOLDERS
      text(nf(((float) finalScore/MAX_SCORE * 100), 0, 2) + "%", 450, 300);
      textFont(f3, 28);
      text(finalScore + "/" + MAX_SCORE, 450, 380);
      String msg = "";
      if (finalScore <= 9) {
        msg = "Try harder next time...";
      } else if (finalScore >9 && finalScore <= 27) {
        msg = "Good job, but there is room for improvement!";
      } else {
       msg = "AMAZING! You are a master of instruments!"; 
      }
      text(msg, 450, 450);
      
      //one button for main menu, one button for details
      noFill();
      stroke(255);
      strokeWeight(3);
      
      rect(x, y, w, h, UI_CORNER);
      //rect(x + 710, y + 510, w, h, UI_CORNER);
   
      //fill(0);
      textFont(f3);
  
      text("Main Menu", 90, 45);
      
      //text("Details", 800, 552);
    
      if (mousePressed && mouseX > x && mouseX <x+w && mouseY>y && mouseY <y + h) {
         stateId = 3;
         reachedTp = false;
         transparency1 = 0;
         menuY = 520;
         
        resetQuiz();
        currentKey = 0;
        quizStateId = -1;
        onLastSlide = false;         
        nameClicked = false;
        orderRandomized = false;
        classClicked = false;
        finalScore = 0;
        mousePressed = false;
       }
       /*
       if (mousePressed && mouseX > x + 710 && mouseX <x+ 710 + w && mouseY>y + 510 && mouseY <y + 510 + h) {
         stateId = 9;
       }
       */
    }
   }
  
  
}

//click sound
void mousePressed() {
 clickSfx.play(); 
}
